(()=>{"use strict";var e={105:(e,t,r)=>{r.d(t,{Z:()=>a});class n{constructor(e){this.url=e}async get(){return fetch(this.url).then((e=>e.json())).catch((e=>console.log("an error occurs",e)))}}class a extends n{async getPhotographers(){return this.get().then((e=>e.photographers))}async getMedias(){return this.get().then((e=>e.media))}}},248:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(792);class a{constructor(e,t,r){this.filter=e,this.mediaID=t,this.photographerName=r,this.contentLightBox=document.querySelector(".caroussel-content"),this.lightBox=document.getElementById("lightbox-modal"),this.body=document.querySelector("body"),this.main=document.querySelector("main")}render(){const e=document.getElementById("lightbox-modal");e.classList.add("active"),this.mediaCurrent=this.filter.find((e=>e.id===this.mediaID)),this.mediaCurrentID=this.filter.indexOf(this.mediaCurrent);const t=this.getMediasCardDOM(this.mediaCurrentID);e.setAttribute("aria-hidden","false"),this.body.classList.add("no-scroll"),this.main.style.display="none",this.contentLightBox.innerHTML=t;const r=document.querySelector(".carousel__button--prev"),n=document.querySelector(".carousel__button--next");document.querySelector(".close").addEventListener("click",(()=>{this.close()})),r.addEventListener("click",(()=>{this.previousImage()})),n.addEventListener("click",(()=>{this.nextImage()})),document.addEventListener("keyup",(e=>{this.handleEvent(e)}))}close(){this.lightBox.classList.remove("active"),this.lightBox.setAttribute("aria-hidden","true"),this.body.classList.remove("no-scroll"),this.main.style.display="block"}nextImage(){return this.mediaCurrentID===this.filter.length-1?this.mediaCurrentID=0:this.mediaCurrentID+=1,this.contentLightBox.innerHTML=this.getMediasCardDOM(this.mediaCurrentID),this.mediaCurrentID}previousImage(){return 0===this.mediaCurrentID?this.mediaCurrentID=this.filter.length-1:this.mediaCurrentID-=1,this.contentLightBox.innerHTML=this.getMediasCardDOM(this.mediaCurrentID),this.mediaCurrentID}getMediasCardDOM(e){return`\n      <div class="carrousel-media">\n        ${n.uf.getMediaType(this.filter[e],this.photographerName)}\n        <h2>${this.filter[e].title}</h2>\n        </div>\n        `}handleEvent(e){"ArrowLeft"===e.key?this.previousImage():"ArrowRight"===e.key?this.nextImage():"Escape"===e.key&&this.close()}}},792:(e,t,r)=>{r.d(t,{ZG:()=>c,cj:()=>l,uf:()=>o});var n=r(309),a=r(248);class s{constructor(e,t){this.image=e.image,this.title=e.title,this.id=e.id,this.photographerName=t}render(){return`<img \n            src="./assets/images/media/${this.photographerName}/${this.image}"\n            alt="${this.title}" />`}}class i{constructor(e,t){this.video=e.video,this.title=e.title,this.id=e.id,this.photographerName=t}render(){return`\n      <video controls id="mediaVideo" aria-label="${this.title}">\n        <source src="./assets/images/media/${this.photographerName}/${this.video}" type="video/mp4" />\n      </video>`}}class o{static getMediaType(e,t){return void 0===e.video?new s(e,t).render():new i(e,t).render()}}function c(e){return`\n    <div class="photographer-text">\n        <h1>${e.name}</h1>\n        <h2>${e.city}, ${e.country}</h2>\n        <p>${e.tagline}</p>\n        <div class="priceInfo"><span id="price"></span><i class="fas fa-heart"></i>${e.price}€/jour</div>\n    </div>\n    <button class="contact_button" onclick="displayModal()" aria-label="Formulaire pour contacter le photographe">Contactez-moi</button>\n    <div class="photographer-img">\n        <img src="./assets/photographers/${e.portrait}" alt="${e.name}"/>\n    </div>\n    `}function l(e,t,r){const{likes:s,title:i,id:c}=t,l=new a.Z(e,c,r),d=o.getMediaType(t,r);return{getMediasCardDOM:function(){const e=document.createElement("h2");e.textContent=i;const r=document.createElement("i");r.setAttribute("class","far fa-heart"),r.setAttribute("tabindex","0"),r.setAttribute("aria-label","boutton like"),r.addEventListener("click",(()=>{(0,n.dE)(c)})),r.addEventListener("keyup",(e=>{"Enter"===e.key&&(0,n.dE)(c)}));const a=document.createElement("span");a.textContent=s,a.setAttribute("aria-label",`${s} like `);const o=document.createElement("div"),u=d;o.innerHTML=u,o.setAttribute("class","photographer-media"),o.setAttribute("tabindex","0"),o.addEventListener("click",(()=>{l.render()})),o.addEventListener("keyup",(e=>{"Enter"===e.key&&l.render()}));const h=document.createElement("i");h.setAttribute("class","fas fa-video"),t.video&&o.append(h);const m=document.createElement("div");m.setAttribute("class","media-like"),m.setAttribute("id",c),m.append(a,r);const p=document.createElement("div");p.setAttribute("class","media-content"),p.append(e,m);const g=document.createElement("article");return g.setAttribute("class","medial-container"),g.setAttribute("data-id",`${c}`),g.append(o,p),g}}}},410:(e,t,r)=>{function n(e){return{getUserCardDOM:function(){return e.map((e=>`<article>\n            <a href="./photographer.html?id=${e.id}" aria-label="lien vers ${e.name} ">\n                <img src="./assets/photographers/${e.portrait}" alt="${e.name}"/>\n                <h2>${e.name}</h2>\n            </a>\n            <div>\n                <h3 aria-label="zone de travail ${e.city}, ${e.country}">${e.city}, ${e.country}</h3>\n                <p aria-label = "description ${e.tagline}">${e.tagline}</p>\n                <p class="price" aria-label="le cout est de  ${e.price}€ par jour">${e.price}€/jour</p>\n            </div>\n        </article>`)).join("")}}}r.d(t,{Z:()=>n})},627:(e,t,r)=>{var n=r(410),a=r(105);(async()=>{(async e=>{document.querySelector(".photographer_section").innerHTML=(0,n.Z)(e).getUserCardDOM()})(await(async()=>{const e=new a.Z("../../data/photographers.json");return await e.getPhotographers()})())})()},309:(e,t,r)=>{r.d(t,{ZP:()=>l,dE:()=>m});var n=r(792),a=r(105);let s=[];const i=document.getElementById("filter-select"),o=async()=>{const e=new a.Z("../../data/photographers.json");return await e.getPhotographers()},c=()=>{const e=window.location.search,t=new URLSearchParams(e).get("id");return parseInt(t,10)},l=async function(){const e=await o(),t=c();return e.find((e=>e.id===t))};(async()=>{const e=await getUserInfo();document.querySelector(".photograph-header").innerHTML=(0,n.ZG)(e)})();const d=async e=>(await(async()=>{const e=new a.Z("../../data/photographers.json");return await e.getMedias()})()).filter((t=>t.photographerId==e)),u=async(e,t)=>{const r=document.querySelector(".photographer_media_section");r.innerHTML="",e.forEach((a=>{const s=(0,n.cj)(e,a,t).getMediasCardDOM();r.appendChild(s)})),document.querySelector(".photographer-media video").removeAttribute("controls")},h=()=>{const e=document.getElementById("price"),t=document.querySelectorAll(".media-like span"),r=[];t.forEach((e=>{r.push(parseInt(e.innerHTML,10))}));let n=0;return n=r.reduce(((e,t)=>e+t),0),e.innerHTML=n,n};async function m(e){const t=document.getElementById("price");let r=h();const n=document.querySelector(`div[id='${e}'] span`),a=document.querySelector(`div[id='${e}'] i`);a.classList.contains("far")?(n.textContent=parseInt(n.textContent,10)+1,r+=1,a.classList.replace("far","fas")):(n.textContent=parseInt(n.textContent,10)-1,r-=1,a.classList.replace("fas","far")),t.innerHTML=r}i.addEventListener("change",(async()=>{const e=await o(),t=c(),r=e.find((e=>e.id===t)).name.split(" ")[0].replace("-"," "),n=await d(t);switch(i.value){case"popularity":{const e=n.sort(((e,t)=>t.likes-e.likes));s=e}break;case"date":{const e=n.sort(((e,t)=>new Date(t.date)-new Date(e.date)));s=e}break;case"title":{const e=n.sort(((e,t)=>e.title<t.title?-1:1));s=e;break}default:console.log(s.value)}u(s,r)})),async function(){const e=c(),t=await d(e);s=t.sort(((e,t)=>t.likes-e.likes)),(async()=>{const e=await o(),t=c(),r=e.find((e=>e.id===t)).name.split(" ")[0].replace("-"," ");u(s,r),h()})()}()},399:(e,t,r)=>{var n=r(309);const a=document.querySelector("body"),s=document.getElementById("contact-modal");document.displayModal=async function(){s.style.display="block";const e=document.getElementById("name"),t=await(0,n.ZP)();e.setAttribute("aria-labelledby",`Contact me ${t.name}`),s.setAttribute("aria-hidden","false"),a.classList.add("no-scroll"),e.innerHTML=`Contactez-moi <br> ${t.name}`,document.addEventListener("keyup",(e=>{"Escape"==e.key&&(s.style.display="none")}))};const i=document.getElementById("contactForm"),o=document.getElementById("firstName"),c=document.getElementById("lastName"),l=document.getElementById("email"),d=document.getElementById("message"),u=document.getElementById("first-error"),h=document.getElementById("last-error"),m=document.getElementById("email-error"),p=document.getElementById("message-error"),g=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,y=/^[a-zA-Zéèà\s]+$/,v=e=>!e.value;function f(e,t,r){return function(e,t,r,n){return e.innerText=r,e.classList.add("displayError"),!1!==t&&(t.classList.add("border-red"),t.classList.remove("border-green")),!1}(e,t,r)}function b(e,t){e.classList.remove("displayError"),!1!==t&&t.classList.replace("border-red","border-green")}const E=()=>{if(v(o))f(u,o,"Veuillez saisir votre prénom");else if(o.value.length<2)f(u,o,"Veuillez entrer 2 caractères ou plus pour le champ du nom.");else{if(o.value.match(y))return b(u,o),!0;f(u,o,"Veuillez utiliser des lettres")}},L=()=>{if(v(c))f(h,c,"Veuillez entrez votre nom");else if(c.value.match(y)){if(1!=c.value.length)return b(h,c),!0;f(h,c,"Veuillez entrer 2 caractères ou plus pour le champ du nom.")}else f(h,c,"Veuillez utiliser les lettres de l'aphabet")},I=()=>{if(v(l))f(m,l,"Veuillez entrez votre adresse mail");else{if(l.value.match(g))return b(m,l),!0;f(m,l,"email invalide")}},$=()=>v(d)?(f(p,d,"Veuillez entrez votre message"),!1):(b(p,d),!0),C=document.querySelectorAll(".input-control");function M(){i.reset();for(let e=0;e<C.length;e++){const t=C[e].querySelector(".inputContent"),r=C[e].querySelector(".error-message");t.classList.remove("border-red"),t.classList.remove("border-green"),r.classList.remove("displayError")}s.style.display="none",i.style.display="block"}i.addEventListener("submit",(e=>{e.preventDefault();const t=E(),r=L(),n=I(),i=$();if(o.addEventListener("change",E),c.addEventListener("change",L),l.addEventListener("change",I),d.addEventListener("change",$),t&&r&&n&&i){const e={firstName:o.value,lastName:c.value,email:l.value,message:d.value};return console.log("informations: ",e),s.style.display="none",s.setAttribute("aria-hidden","false"),a.classList.remove("no-scroll"),M(),!0}return console.log("failed"),!1})),document.closeModal=function(){s.style.display="none",s.setAttribute("aria-hidden","true"),a.classList.remove("no-scroll"),M()}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(627),r(309),r(248),r(792),r(410),r(399),r(105)})();